<odoo>
	
	<!-- project leave tree view -->
	<record id="project_leave_tree_view" model="ir.ui.view">
        <field name="name">project.leave.tree.view</field>
        <field name="model">project.leave</field>
        <field name="arch" type="xml">
        	<tree string="Project Leave Request">
        		<field name="name"/>
				<field name="project_id"/>
				<field name="min_hour_per_day"/>
				<field name="us_name_id"/>
				<field name="start_date"/>
				<field name="end_date"/>
				<field name="leave_duration"/>
				<field name="reason"/>
				<field name="state"/>
        	</tree>
        </field>
	</record>


	<!-- project leave form view -->
	<record id="project_leave_form_view" model="ir.ui.view">
        <field name="name">project.leave.form.view</field>
        <field name="model">project.leave</field>
        <field name="arch" type="xml">
			<form string="Project Leave Request">
				<header>
					<button name="action_confirm_leave" string="Confirm" 
					type="object" class="btn-primary"
					states="draft"/>
					<button name="action_send_leave_mail" string="Send Mail"
					type="object" class="btn-primary"
					states="confirm"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm,sent"/>
                </header>
                <sheet>
					<group>
						<group>
							<field name="name" 
							options="{'no_create_edit': True, 'no_open': True, 'no_create': True}"
							attrs="{'readonly': [('state', '!=', 'draft')]}"/>
							<field name="project_id" readonly="1"/>
							<field name="hour_selection" readonly="1"/>
							<field name="min_hour_per_day"/>
							<field name="us_name_id" readonly="1"/>
						</group>
						<group>
							<field name="start_date" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
							<field name="end_date" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
							<field name="leave_duration" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
							<field name="reason" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
						</group>
					</group>
				</sheet>
				<div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
			</form>       	
        </field>
	</record>
	
	<!-- project leave request window action -->
	<record id="action_project_leave" model="ir.actions.act_window">
	    <field name="name">Project Leave Request</field>
	    <field name="type">ir.actions.act_window</field>
	    <field name="res_model">project.leave</field>
	    <field name="view_type">form</field>
	    <field name="view_mode">tree,form</field>
	    <field name="help" type="html">
	        <p class="oe_view_nocontent_create">
	            Create a Project Leave, the first step of a new leave request.
	        </p>
	    </field>
	</record>
	
	<menuitem id="menu_project_leave_request" 
		action="action_project_leave"
		parent="project.menu_main_pm"
		string="Project Leave Request"
		groups="group_project_general_manager"/>
</odoo>